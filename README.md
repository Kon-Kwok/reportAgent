# 项目简介

本项目是一个基于 LangGraph 和大语言模型（LLM）的自动化图书撰写工具。它通过一个预定义的工作流，将一份完整的图书大纲自动分解为各个章节，并利用多智能体（Multi-Agent）协作模式（撰写、审校、润色）来逐一完成每个章节的撰写，最终将所有章节汇编成一部完整的书稿。

# 项目结构

`report_agent` 包是本项目的核心，包含以下几个关键模块：

*   **`main.py`**: 项目的主入口文件。它负责加载必要的配置（如 API 密钥）、读取图书大纲、构建并执行整个图书撰写工作流，并在流程结束后保存最终生成的书稿。

*   **`agents.py`**: 定义了工作流中使用的各种智能体（Agent）。每个智能体都是一个配置了特定提示词（Prompt）的大语言模型实例，负责执行专门的任务，包括：
    *   `Writer Agent`: 根据章节大纲撰写初稿。
    *   `Reviewer Agent`: 对稿件进行审校，提出修改建议。
    *   `Refiner Agent`: 根据审校意见对稿件进行优化和重写。

*   **`graph.py`**: 使用 LangGraph 库定义和构建了整个图书撰写的工作流。它包含两个核心部分：
    *   **主工作流**: 负责将图书大纲解析为章节，并按顺序调用章节撰写子工作流。
    *   **章节撰写子工作流**: 一个内部循环，通过“撰写-审校-润色”的协作模式，不断迭代优化单个章节的内容，直到满足质量要求。

*   **`prompts.py`**: 存放了所有用于指导大语言模型生成内容的提示词模板。这些模板明确定义了每个智能体在工作流中需要扮演的角色和完成的具体任务。

# 如何运行

在运行项目之前，请确保已完成以下准备工作：

1.  **安装依赖**:
    ```bash
    pip install -r requirements.txt
    ```

2.  **配置环境变量**:
    在项目根目录下创建一个 `.env` 文件，并填入必要的 API 密钥和模型配置，例如：
    ```
    GEMINI_API_KEY="YOUR_GEMINI_API_KEY"
    OPENAI_API_BASE="YOUR_API_BASE_URL"
    GEMINI_MODEL="gemini-pro"
    ```

3.  **准备大纲文件**:
    确保项目根目录下存在一个名为 `202508042315.md` 的图书大纲文件。

完成上述步骤后，通过以下命令运行项目：

```bash
python -m report_agent.main
```

程序将自动开始执行图书撰写工作流，并将最终生成的书稿保存为 `final_book.md`。